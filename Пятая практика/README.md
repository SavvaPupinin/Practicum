Клиент и сервер создают ключи только если их еще не существует.
Сервер сохраняет ключ в файл (ip клиента).txt, для иного клиента, соответсвенно, в иной файл .txt

![image](https://user-images.githubusercontent.com/92520538/144810877-edf662cf-b13c-4f6b-b0f9-24684448a95f.png)

Клиент сохраняет свой ключ в csv file с именем myKey

![image](https://user-images.githubusercontent.com/92520538/144810938-f4f7ae23-56ad-4c8b-9eb3-4315da6f1ec7.png)

При начале обмена сообщениями клиента посылает серверу свой открытый ключ а сервер проверяет в файле разрешено.csv известен ли такой клиент.

![image](https://user-images.githubusercontent.com/92520538/144811051-a40b1ec2-7eaa-4464-adb3-5aadcb7b6b56.png)

Далее если такой клиент известен, то сервер отправляет первым зашифрованным сообщением порт клиенту и они оба bindятся к другому порту.
Шифрование уже происходит на нем как и дальнейшеий обмен сообщениями. 
Все действия относительно генерации ключей и установления режима шифрования вынесены в отдельные функции.

![image](https://user-images.githubusercontent.com/92520538/144811304-ccaed950-7cae-4087-b9c6-73d6d44fb75e.png)

Пример установления шифрования и обмена сообщениями

![image](https://user-images.githubusercontent.com/92520538/144811439-f3ac16dd-6f43-4fe5-95b8-85a4145e69f9.png)

Первый порт это обмен ключами и вычисление приватного ключа, второй порт уже порт обмена сообщениями. Сообщения пересылаются друг другу

![image](https://user-images.githubusercontent.com/92520538/144811558-c1d198e2-94f2-4b89-b51a-b87d2f67ea3a.png)

Между клиентом и сервером
